// short captions
#let in-outline = state("in-outline", false)
#show outline: it => {
    in-outline.update(true)
    it
    in-outline.update(false)
}
#let flex-caption(long, short) = locate(loc => 
    if in-outline.at(loc) { short } else { long }
)

#import"@preview/tablex:0.0.8": tablex, gridx, hlinex, vlinex, colspanx, rowspanx, cellx

// table params
#let col1width = 10em
#let coliwidth = auto
#let name_align = left + horizon
// pkey 
#let ps = (super[$+$], super[$star.op$], super[$star.op star.op$], super[$star.op star.op star.op$], )
 
#figure(
    gridx(
        columns: (col1width, coliwidth, coliwidth, ),
        rows: (0.2em, 1.5em),
        align: center + horizon,
        stroke: auto,
        hlinex(y: 0, stroke: 0.05em),
        cellx(x: 0, y: 0, colspan: 3)[],
        hlinex(y: 1, stroke: 0.05em),
        cellx(x: 1, y: 1)[(1)],
        cellx(x: 2, y: 1)[(2)],
        hlinex(start: 1, y: 2, stroke: 0.05em),
        cellx(x: 0, y: 36, align: name_align)[isindigenous_a: Mestizo],
        cellx(x: 1, y: 36)[0.051],
        cellx(x: 1, y: 37)[(0.087)],
        cellx(x: 2, y: 36)[0.092#ps.at(0)],
        cellx(x: 2, y: 37)[(0.051)],
        cellx(x: 0, y: 20, align: name_align)[religion_c: No Religion],
        cellx(x: 1, y: 20)[-0.175],
        cellx(x: 1, y: 21)[(0.145)],
        cellx(x: 2, y: 20)[-0.17#ps.at(0)],
        cellx(x: 2, y: 21)[(0.101)],
        cellx(x: 0, y: 44, align: name_align)[degree_diff_a],
        cellx(x: 1, y: 44)[0.27#ps.at(1)],
        cellx(x: 1, y: 45)[(0.106)],
        cellx(x: 2, y: 44)[0.223#ps.at(2)],
        cellx(x: 2, y: 45)[(0.07)],
        cellx(x: 0, y: 46, align: name_align)[age_mean_a],
        cellx(x: 1, y: 46)[-2.159#ps.at(3)],
        cellx(x: 1, y: 47)[(0.156)],
        cellx(x: 2, y: 46)[-2.628#ps.at(3)],
        cellx(x: 2, y: 47)[(0.089)],
        cellx(x: 0, y: 18, align: name_align)[educated: Yes],
        cellx(x: 1, y: 18)[-0.249#ps.at(3)],
        cellx(x: 1, y: 19)[(0.067)],
        cellx(x: 2, y: 18)[-0.263#ps.at(3)],
        cellx(x: 2, y: 19)[(0.053)],
        cellx(x: 0, y: 70, align: name_align)[age & age_mean_a],
        cellx(x: 1, y: 70)[2.913#ps.at(3)],
        cellx(x: 1, y: 71)[(0.411)],
        cellx(x: 2, y: 70)[4.29#ps.at(3)],
        cellx(x: 2, y: 71)[(0.237)],
        cellx(x: 0, y: 52, align: name_align)[wealth_d1_4_diff_a],
        cellx(x: 1, y: 52)[-1.523#ps.at(3)],
        cellx(x: 1, y: 53)[(0.094)],
        cellx(x: 2, y: 52)[-1.406#ps.at(3)],
        cellx(x: 2, y: 53)[(0.057)],
        cellx(x: 0, y: 84, align: name_align)[dists_p_notinf & dists_p],
        cellx(x: 2, y: 84)[-2.046#ps.at(3)],
        cellx(x: 2, y: 85)[(0.08)],
        cellx(x: 0, y: 22, align: name_align)[religion_c: Protestant],
        cellx(x: 1, y: 22)[-0.134#ps.at(1)],
        cellx(x: 1, y: 23)[(0.062)],
        cellx(x: 2, y: 22)[-0.128#ps.at(2)],
        cellx(x: 2, y: 23)[(0.042)],
        cellx(x: 0, y: 24, align: name_align)[wealth_d1_4],
        cellx(x: 1, y: 24)[-2.045#ps.at(3)],
        cellx(x: 1, y: 25)[(0.384)],
        cellx(x: 2, y: 24)[-2.669#ps.at(3)],
        cellx(x: 2, y: 25)[(0.244)],
        cellx(x: 0, y: 56, align: name_align)[man & man_a: Mixed],
        cellx(x: 1, y: 56)[-0.301#ps.at(3)],
        cellx(x: 1, y: 57)[(0.077)],
        cellx(x: 2, y: 56)[-0.414#ps.at(3)],
        cellx(x: 2, y: 57)[(0.046)],
        cellx(x: 0, y: 12, align: name_align)[age],
        cellx(x: 1, y: 12)[-0.227],
        cellx(x: 1, y: 13)[(0.369)],
        cellx(x: 2, y: 12)[-0.103],
        cellx(x: 2, y: 13)[(0.285)],
        cellx(x: 0, y: 54, align: name_align)[dists_p],
        cellx(x: 1, y: 54)[-0.703#ps.at(3)],
        cellx(x: 1, y: 55)[(0.036)],
        cellx(x: 0, y: 60, align: name_align)[isindigenous_a: Mestizo & isindigenous],
        cellx(x: 1, y: 60)[-0.14],
        cellx(x: 1, y: 61)[(0.127)],
        cellx(x: 2, y: 60)[-0.145#ps.at(0)],
        cellx(x: 2, y: 61)[(0.078)],
        cellx(x: 0, y: 48, align: name_align)[age_diff_a],
        cellx(x: 1, y: 48)[1.271#ps.at(3)],
        cellx(x: 1, y: 49)[(0.082)],
        cellx(x: 2, y: 48)[1.385#ps.at(3)],
        cellx(x: 2, y: 49)[(0.051)],
        cellx(x: 0, y: 58, align: name_align)[man & man_a: Women],
        cellx(x: 1, y: 58)[0.037],
        cellx(x: 1, y: 59)[(0.067)],
        cellx(x: 2, y: 58)[-0.344#ps.at(3)],
        cellx(x: 2, y: 59)[(0.039)],
        cellx(x: 0, y: 32, align: name_align)[man_a: Mixed],
        cellx(x: 1, y: 32)[0.16#ps.at(2)],
        cellx(x: 1, y: 33)[(0.05)],
        cellx(x: 2, y: 32)[0.314#ps.at(3)],
        cellx(x: 2, y: 33)[(0.029)],
        cellx(x: 0, y: 14, align: name_align)[age ^ 2],
        cellx(x: 1, y: 14)[-0.667],
        cellx(x: 1, y: 15)[(0.431)],
        cellx(x: 2, y: 14)[-1.438#ps.at(3)],
        cellx(x: 2, y: 15)[(0.338)],
        cellx(x: 0, y: 64, align: name_align)[religion_c: No Religion & religion_c_a: Same],
        cellx(x: 1, y: 64)[0.131],
        cellx(x: 1, y: 65)[(0.154)],
        cellx(x: 0, y: 40, align: name_align)[religion_c_a: Same],
        cellx(x: 1, y: 40)[0.18#ps.at(3)],
        cellx(x: 1, y: 41)[(0.045)],
        cellx(x: 0, y: 74, align: name_align)[kin431 & relation: personal_private],
        cellx(x: 1, y: 74)[0.273#ps.at(3)],
        cellx(x: 1, y: 75)[(0.064)],
        cellx(x: 2, y: 74)[0.257#ps.at(3)],
        cellx(x: 2, y: 75)[(0.035)],
        cellx(x: 0, y: 28, align: name_align)[isindigenous],
        cellx(x: 1, y: 28)[0.083],
        cellx(x: 1, y: 29)[(0.107)],
        cellx(x: 2, y: 28)[0.195#ps.at(1)],
        cellx(x: 2, y: 29)[(0.072)],
        cellx(x: 0, y: 42, align: name_align)[degree_mean_a],
        cellx(x: 1, y: 42)[-1.103#ps.at(3)],
        cellx(x: 1, y: 43)[(0.212)],
        cellx(x: 2, y: 42)[-1.393#ps.at(3)],
        cellx(x: 2, y: 43)[(0.128)],
        cellx(x: 0, y: 2, align: name_align)[(Intercept)],
        cellx(x: 1, y: 2)[2.15#ps.at(3)],
        cellx(x: 1, y: 3)[(0.247)],
        cellx(x: 2, y: 2)[1.951#ps.at(3)],
        cellx(x: 2, y: 3)[(0.169)],
        cellx(x: 0, y: 34, align: name_align)[man_a: Women],
        cellx(x: 1, y: 34)[0.288#ps.at(3)],
        cellx(x: 1, y: 35)[(0.042)],
        cellx(x: 2, y: 34)[0.426#ps.at(3)],
        cellx(x: 2, y: 35)[(0.024)],
        cellx(x: 0, y: 38, align: name_align)[isindigenous_a: Mixed],
        cellx(x: 1, y: 38)[-0.077],
        cellx(x: 1, y: 39)[(0.088)],
        cellx(x: 2, y: 38)[0.024],
        cellx(x: 2, y: 39)[(0.052)],
        cellx(x: 0, y: 66, align: name_align)[religion_c: Protestant & religion_c_a: Same],
        cellx(x: 1, y: 66)[0.21#ps.at(2)],
        cellx(x: 1, y: 67)[(0.063)],
        cellx(x: 0, y: 10, align: name_align)[man],
        cellx(x: 1, y: 10)[0.136#ps.at(1)],
        cellx(x: 1, y: 11)[(0.059)],
        cellx(x: 2, y: 10)[0.329#ps.at(3)],
        cellx(x: 2, y: 11)[(0.041)],
        cellx(x: 0, y: 80, align: name_align)[religion_c: No Religion & religion_c_a: Mixed],
        cellx(x: 2, y: 80)[0.213#ps.at(1)],
        cellx(x: 2, y: 81)[(0.097)],
        cellx(x: 0, y: 16, align: name_align)[educated: Some],
        cellx(x: 1, y: 16)[-0.095#ps.at(0)],
        cellx(x: 1, y: 17)[(0.054)],
        cellx(x: 2, y: 16)[-0.113#ps.at(1)],
        cellx(x: 2, y: 17)[(0.043)],
        cellx(x: 0, y: 6, align: name_align)[relation: personal_private],
        cellx(x: 1, y: 6)[-0.384#ps.at(3)],
        cellx(x: 1, y: 7)[(0.029)],
        cellx(x: 2, y: 6)[-0.438#ps.at(3)],
        cellx(x: 2, y: 7)[(0.018)],
        cellx(x: 0, y: 26, align: name_align)[coffee_cultivation],
        cellx(x: 1, y: 26)[0.221#ps.at(2)],
        cellx(x: 1, y: 27)[(0.069)],
        cellx(x: 2, y: 26)[0.228#ps.at(3)],
        cellx(x: 2, y: 27)[(0.064)],
        cellx(x: 0, y: 30, align: name_align)[educated_a: Same],
        cellx(x: 1, y: 30)[0.02],
        cellx(x: 1, y: 31)[(0.026)],
        cellx(x: 2, y: 30)[-0.004],
        cellx(x: 2, y: 31)[(0.016)],
        cellx(x: 0, y: 4, align: name_align)[kin431],
        cellx(x: 1, y: 4)[2.676#ps.at(3)],
        cellx(x: 1, y: 5)[(0.052)],
        cellx(x: 2, y: 4)[2.525#ps.at(3)],
        cellx(x: 2, y: 5)[(0.029)],
        cellx(x: 0, y: 50, align: name_align)[wealth_d1_4_mean_a],
        cellx(x: 1, y: 50)[0.012],
        cellx(x: 1, y: 51)[(0.377)],
        cellx(x: 2, y: 50)[-0.601#ps.at(1)],
        cellx(x: 2, y: 51)[(0.23)],
        cellx(x: 0, y: 62, align: name_align)[isindigenous_a: Mixed & isindigenous],
        cellx(x: 1, y: 62)[0.062],
        cellx(x: 1, y: 63)[(0.121)],
        cellx(x: 2, y: 62)[-0.012],
        cellx(x: 2, y: 63)[(0.072)],
        cellx(x: 0, y: 8, align: name_align)[degree],
        cellx(x: 1, y: 8)[0.232],
        cellx(x: 1, y: 9)[(0.286)],
        cellx(x: 2, y: 8)[-0.3#ps.at(0)],
        cellx(x: 2, y: 9)[(0.182)],
        cellx(x: 0, y: 72, align: name_align)[wealth_d1_4 & wealth_d1_4_mean_a],
        cellx(x: 1, y: 72)[2.539#ps.at(3)],
        cellx(x: 1, y: 73)[(0.633)],
        cellx(x: 2, y: 72)[3.597#ps.at(3)],
        cellx(x: 2, y: 73)[(0.39)],
        cellx(x: 0, y: 68, align: name_align)[degree & degree_mean_a],
        cellx(x: 1, y: 68)[0.793],
        cellx(x: 1, y: 69)[(0.909)],
        cellx(x: 2, y: 68)[3.209#ps.at(3)],
        cellx(x: 2, y: 69)[(0.642)],
        cellx(x: 0, y: 76, align: name_align)[religion_c_a: Mixed],
        cellx(x: 2, y: 76)[-0.237#ps.at(3)],
        cellx(x: 2, y: 77)[(0.026)],
        cellx(x: 0, y: 78, align: name_align)[dists_p_notinf],
        cellx(x: 2, y: 78)[0.555#ps.at(3)],
        cellx(x: 2, y: 79)[(0.045)],
        cellx(x: 0, y: 82, align: name_align)[religion_c: Protestant & religion_c_a: Mixed],
        cellx(x: 2, y: 82)[0.263#ps.at(3)],
        cellx(x: 2, y: 83)[(0.04)],
        hlinex(start: 1, y: 86, stroke: 0.05em),
        cellx(x: 0, y: 86, align: name_align)[perceiver var.],
        cellx(x: 0, y: 87, align: name_align)[village_code var.],
        cellx(x: 0, y: 88, align: name_align)[N#sub[groups]],
        cellx(x: 1, y: 86)[1.31],
        cellx(x: 1, y: 87)[0.196],
        cellx(x: 1, y: 88)[9757, 82],
        cellx(x: 2, y: 86)[1.243],
        cellx(x: 2, y: 87)[0.202],
        cellx(x: 2, y: 88)[9943, 82],
        hlinex(start: 1, y: 89, stroke: 0.05em),
        cellx(x: 0, y: 89, align: name_align)[N],
        cellx(x: 0, y: 90, align: name_align)[BIC],
        cellx(x: 0, y: 91, align: name_align)[AIC],
        cellx(x: 1, y: 89)[75194],
        cellx(x: 1, y: 90)[52826.252],
        cellx(x: 1, y: 91)[52466.367],
        cellx(x: 2, y: 89)[175316],
        cellx(x: 2, y: 90)[129846.703],
        cellx(x: 2, y: 91)[129443.729],
        hlinex(y: 92, stroke: 0.1em),
        cellx(y: 92, colspan: 3, align: left)[Note: #ps.at(0)$p<0.1$; #ps.at(1)$p<0.05$; #ps.at(2)$p<0.005$; #ps.at(3)$p<0.001$],
    ),
    caption: flex-caption(
	[Model comparison with and without distance restriction (FPR).],
	[Model comparison limited distance]
),
    kind: table,
) <table-lt-2-comp-regtable-fpr>
