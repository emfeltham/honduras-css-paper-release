#import"@preview/tablex:0.0.8": tablex, gridx, hlinex, vlinex, colspanx, rowspanx, cellx

// short captions
#let in-outline = state("in-outline", false)
#show outline: it => {
    in-outline.update(true)
    it
    in-outline.update(false)
}
#let flex-caption(long, short) = locate(loc => 
    if in-outline.at(loc) { short } else { long }
)

// table params
#let col1width = 10em
#let coliwidth = auto
#let name_align = left + horizon
// pkey 
#let ps = (super[$+$], super[$star.op$], super[$star.op star.op$], super[$star.op star.op star.op$], )
 
#figure(
    gridx(
        columns: (col1width, coliwidth, coliwidth, ),
        rows: (0.2em, 1.5em),
        align: center + horizon,
        stroke: auto,
        hlinex(y: 0, stroke: 0.05em),
        cellx(x: 0, y: 0, colspan: 3)[],
        hlinex(y: 1, stroke: 0.05em),
        cellx(x: 1, y: 1)[(TPR)],
        cellx(x: 2, y: 1)[(TPR)],
        hlinex(start: 1, y: 2, stroke: 0.05em),
        cellx(x: 0, y: 36, align: name_align)[isindigenous_a: Mestizo],
        cellx(x: 1, y: 36)[0.0998#ps.at(1)],
        cellx(x: 1, y: 37)[[0.0107, 0.189]],
        cellx(x: 2, y: 36)[0.0104],
        cellx(x: 2, y: 37)[[-0.051, 0.0717]],
        cellx(x: 0, y: 20, align: name_align)[religion_c: No Religion],
        cellx(x: 1, y: 20)[-0.0912],
        cellx(x: 1, y: 21)[[-0.2817, 0.0994]],
        cellx(x: 2, y: 20)[0.1077],
        cellx(x: 2, y: 21)[[-0.0597, 0.2751]],
        cellx(x: 0, y: 44, align: name_align)[degree_diff_a],
        cellx(x: 1, y: 44)[0.134#ps.at(1)],
        cellx(x: 1, y: 45)[[0.0147, 0.2533]],
        cellx(x: 2, y: 44)[0.1459#ps.at(3)],
        cellx(x: 2, y: 45)[[0.0664, 0.2255]],
        cellx(x: 0, y: 46, align: name_align)[age_mean_a],
        cellx(x: 1, y: 46)[-2.4236#ps.at(3)],
        cellx(x: 1, y: 47)[[-2.578, -2.2693]],
        cellx(x: 2, y: 46)[-0.849#ps.at(3)],
        cellx(x: 2, y: 47)[[-0.952, -0.746]],
        cellx(x: 0, y: 18, align: name_align)[educated: Yes],
        cellx(x: 1, y: 18)[-0.2412#ps.at(3)],
        cellx(x: 1, y: 19)[[-0.3428, -0.1395]],
        cellx(x: 2, y: 18)[-0.6064#ps.at(3)],
        cellx(x: 2, y: 19)[[-0.7097, -0.5031]],
        cellx(x: 0, y: 70, align: name_align)[age & age_mean_a],
        cellx(x: 1, y: 70)[4.0271#ps.at(3)],
        cellx(x: 1, y: 71)[[3.6123, 4.4419]],
        cellx(x: 2, y: 70)[1.629#ps.at(3)],
        cellx(x: 2, y: 71)[[1.3612, 1.8967]],
        cellx(x: 0, y: 52, align: name_align)[wealth_d1_4_diff_a],
        cellx(x: 1, y: 52)[-1.4602#ps.at(3)],
        cellx(x: 1, y: 53)[[-1.5608, -1.3597]],
        cellx(x: 2, y: 52)[-1.0277#ps.at(3)],
        cellx(x: 2, y: 53)[[-1.0868, -0.9686]],
        cellx(x: 0, y: 76, align: name_align)[dists_p_notinf & dists_p],
        cellx(x: 1, y: 76)[-2.071#ps.at(3)],
        cellx(x: 1, y: 77)[[-2.2133, -1.9286]],
        cellx(x: 2, y: 76)[-3.1019#ps.at(3)],
        cellx(x: 2, y: 77)[[-3.2015, -3.0024]],
        cellx(x: 0, y: 22, align: name_align)[religion_c: Protestant],
        cellx(x: 1, y: 22)[-0.0651],
        cellx(x: 1, y: 23)[[-0.1465, 0.0164]],
        cellx(x: 2, y: 22)[-0.0601],
        cellx(x: 2, y: 23)[[-0.1321, 0.0119]],
        cellx(x: 0, y: 24, align: name_align)[wealth_d1_4],
        cellx(x: 1, y: 24)[-2.6777#ps.at(3)],
        cellx(x: 1, y: 25)[[-3.1143, -2.2411]],
        cellx(x: 2, y: 24)[-3.0876#ps.at(3)],
        cellx(x: 2, y: 25)[[-3.4209, -2.7542]],
        cellx(x: 0, y: 56, align: name_align)[man & man_a: Mixed],
        cellx(x: 1, y: 56)[-0.3947#ps.at(3)],
        cellx(x: 1, y: 57)[[-0.4732, -0.3162]],
        cellx(x: 2, y: 56)[-0.1555#ps.at(3)],
        cellx(x: 2, y: 57)[[-0.2004, -0.1107]],
        cellx(x: 0, y: 12, align: name_align)[age],
        cellx(x: 1, y: 12)[-0.0079],
        cellx(x: 1, y: 13)[[-0.5457, 0.5298]],
        cellx(x: 2, y: 12)[-0.377],
        cellx(x: 2, y: 13)[[-0.907, 0.1531]],
        cellx(x: 0, y: 60, align: name_align)[isindigenous_a: Mestizo & isindigenous],
        cellx(x: 1, y: 60)[-0.1382#ps.at(0)],
        cellx(x: 1, y: 61)[[-0.277, 0.0007]],
        cellx(x: 2, y: 60)[-0.0933#ps.at(1)],
        cellx(x: 2, y: 61)[[-0.1845, -0.0022]],
        cellx(x: 0, y: 48, align: name_align)[age_diff_a],
        cellx(x: 1, y: 48)[1.511#ps.at(3)],
        cellx(x: 1, y: 49)[[1.4211, 1.6009]],
        cellx(x: 2, y: 48)[0.1196#ps.at(3)],
        cellx(x: 2, y: 49)[[0.0707, 0.1686]],
        cellx(x: 0, y: 58, align: name_align)[man & man_a: Women],
        cellx(x: 1, y: 58)[-0.302#ps.at(3)],
        cellx(x: 1, y: 59)[[-0.3713, -0.2327]],
        cellx(x: 2, y: 58)[-0.0872#ps.at(3)],
        cellx(x: 2, y: 59)[[-0.1355, -0.0389]],
        cellx(x: 0, y: 32, align: name_align)[man_a: Mixed],
        cellx(x: 1, y: 32)[0.3024#ps.at(3)],
        cellx(x: 1, y: 33)[[0.2531, 0.3516]],
        cellx(x: 2, y: 32)[-0.6374#ps.at(3)],
        cellx(x: 2, y: 33)[[-0.6659, -0.609]],
        cellx(x: 0, y: 14, align: name_align)[age ^ 2],
        cellx(x: 1, y: 14)[-1.469#ps.at(3)],
        cellx(x: 1, y: 15)[[-2.112, -0.8259]],
        cellx(x: 2, y: 14)[1.4768#ps.at(3)],
        cellx(x: 2, y: 15)[[0.8253, 2.1283]],
        cellx(x: 0, y: 64, align: name_align)[religion_c: No Religion & religion_c_a: Same],
        cellx(x: 1, y: 64)[0.0029],
        cellx(x: 1, y: 65)[[-0.1568, 0.1625]],
        cellx(x: 2, y: 64)[-0.2054#ps.at(3)],
        cellx(x: 2, y: 65)[[-0.2966, -0.1141]],
        cellx(x: 0, y: 40, align: name_align)[religion_c_a: Same],
        cellx(x: 1, y: 40)[0.2681#ps.at(3)],
        cellx(x: 1, y: 41)[[0.2209, 0.3153]],
        cellx(x: 2, y: 40)[0.3391#ps.at(3)],
        cellx(x: 2, y: 41)[[0.3127, 0.3656]],
        cellx(x: 0, y: 74, align: name_align)[kin431 & relation: personal_private],
        cellx(x: 1, y: 74)[0.2929#ps.at(3)],
        cellx(x: 1, y: 75)[[0.2357, 0.3501]],
        cellx(x: 2, y: 74)[0.2765#ps.at(3)],
        cellx(x: 2, y: 75)[[0.2297, 0.3233]],
        cellx(x: 0, y: 28, align: name_align)[isindigenous],
        cellx(x: 1, y: 28)[0.1999#ps.at(2)],
        cellx(x: 1, y: 29)[[0.0681, 0.3318]],
        cellx(x: 2, y: 28)[0.0793],
        cellx(x: 2, y: 29)[[-0.0369, 0.1954]],
        cellx(x: 0, y: 42, align: name_align)[degree_mean_a],
        cellx(x: 1, y: 42)[-1.3354#ps.at(3)],
        cellx(x: 1, y: 43)[[-1.5495, -1.1214]],
        cellx(x: 2, y: 42)[-0.6664#ps.at(3)],
        cellx(x: 2, y: 43)[[-0.8246, -0.5083]],
        cellx(x: 0, y: 2, align: name_align)[(Intercept)],
        cellx(x: 1, y: 2)[1.5965#ps.at(3)],
        cellx(x: 1, y: 3)[[1.2923, 1.9007]],
        cellx(x: 2, y: 2)[0.8315#ps.at(3)],
        cellx(x: 2, y: 3)[[0.578, 1.085]],
        cellx(x: 0, y: 34, align: name_align)[man_a: Women],
        cellx(x: 1, y: 34)[0.3849#ps.at(3)],
        cellx(x: 1, y: 35)[[0.343, 0.4268]],
        cellx(x: 2, y: 34)[-0.1737#ps.at(3)],
        cellx(x: 2, y: 35)[[-0.2036, -0.1439]],
        cellx(x: 0, y: 38, align: name_align)[isindigenous_a: Mixed],
        cellx(x: 1, y: 38)[0.0284],
        cellx(x: 1, y: 39)[[-0.0606, 0.1174]],
        cellx(x: 2, y: 38)[-0.0533#ps.at(0)],
        cellx(x: 2, y: 39)[[-0.113, 0.0065]],
        cellx(x: 0, y: 66, align: name_align)[religion_c: Protestant & religion_c_a: Same],
        cellx(x: 1, y: 66)[0.0709#ps.at(1)],
        cellx(x: 1, y: 67)[[0.0046, 0.1373]],
        cellx(x: 2, y: 66)[0.0421#ps.at(1)],
        cellx(x: 2, y: 67)[[0.0047, 0.0795]],
        cellx(x: 0, y: 10, align: name_align)[man],
        cellx(x: 1, y: 10)[0.3127#ps.at(3)],
        cellx(x: 1, y: 11)[[0.2364, 0.389]],
        cellx(x: 2, y: 10)[0.2581#ps.at(3)],
        cellx(x: 2, y: 11)[[0.1879, 0.3283]],
        cellx(x: 0, y: 16, align: name_align)[educated: Some],
        cellx(x: 1, y: 16)[-0.101#ps.at(1)],
        cellx(x: 1, y: 17)[[-0.1821, -0.02]],
        cellx(x: 2, y: 16)[-0.3172#ps.at(3)],
        cellx(x: 2, y: 17)[[-0.3989, -0.2355]],
        cellx(x: 0, y: 6, align: name_align)[relation: personal_private],
        cellx(x: 1, y: 6)[-0.4339#ps.at(3)],
        cellx(x: 1, y: 7)[[-0.4661, -0.4017]],
        cellx(x: 2, y: 6)[-0.2317#ps.at(3)],
        cellx(x: 2, y: 7)[[-0.2486, -0.2147]],
        cellx(x: 0, y: 26, align: name_align)[coffee_cultivation],
        cellx(x: 1, y: 26)[0.2129#ps.at(2)],
        cellx(x: 1, y: 27)[[0.0844, 0.3415]],
        cellx(x: 2, y: 26)[0.1478#ps.at(0)],
        cellx(x: 2, y: 27)[[-0.0075, 0.3031]],
        cellx(x: 0, y: 30, align: name_align)[educated_a: Same],
        cellx(x: 1, y: 30)[0.0004],
        cellx(x: 1, y: 31)[[-0.0271, 0.0279]],
        cellx(x: 2, y: 30)[0.0474#ps.at(3)],
        cellx(x: 2, y: 31)[[0.0309, 0.0639]],
        cellx(x: 0, y: 4, align: name_align)[kin431],
        cellx(x: 1, y: 4)[2.3595#ps.at(3)],
        cellx(x: 1, y: 5)[[2.3132, 2.4058]],
        cellx(x: 2, y: 4)[3.1334#ps.at(3)],
        cellx(x: 2, y: 5)[[3.0985, 3.1682]],
        cellx(x: 0, y: 50, align: name_align)[wealth_d1_4_mean_a],
        cellx(x: 1, y: 50)[-0.7358#ps.at(3)],
        cellx(x: 1, y: 51)[[-1.1412, -0.3304]],
        cellx(x: 2, y: 50)[-1.1337#ps.at(3)],
        cellx(x: 2, y: 51)[[-1.4078, -0.8596]],
        cellx(x: 0, y: 62, align: name_align)[isindigenous_a: Mixed & isindigenous],
        cellx(x: 1, y: 62)[0.0339],
        cellx(x: 1, y: 63)[[-0.0912, 0.1591]],
        cellx(x: 2, y: 62)[0.031],
        cellx(x: 2, y: 63)[[-0.0475, 0.1094]],
        cellx(x: 0, y: 8, align: name_align)[degree],
        cellx(x: 1, y: 8)[-0.3357#ps.at(1)],
        cellx(x: 1, y: 9)[[-0.6404, -0.031]],
        cellx(x: 2, y: 8)[-0.8651#ps.at(3)],
        cellx(x: 2, y: 9)[[-1.0437, -0.6864]],
        cellx(x: 0, y: 54, align: name_align)[dists_p_notinf],
        cellx(x: 1, y: 54)[0.6197#ps.at(3)],
        cellx(x: 1, y: 55)[[0.549, 0.6904]],
        cellx(x: 2, y: 54)[0.9004#ps.at(3)],
        cellx(x: 2, y: 55)[[0.8629, 0.938]],
        cellx(x: 0, y: 68, align: name_align)[degree & degree_mean_a],
        cellx(x: 1, y: 68)[2.9135#ps.at(3)],
        cellx(x: 1, y: 69)[[1.8845, 3.9424]],
        cellx(x: 2, y: 68)[3.088#ps.at(3)],
        cellx(x: 2, y: 69)[[2.3535, 3.8224]],
        cellx(x: 0, y: 72, align: name_align)[wealth_d1_4 & wealth_d1_4_mean_a],
        cellx(x: 1, y: 72)[3.7198#ps.at(3)],
        cellx(x: 1, y: 73)[[3.0312, 4.4084]],
        cellx(x: 2, y: 72)[3.7242#ps.at(3)],
        cellx(x: 2, y: 73)[[3.2566, 4.1919]],
        hlinex(start: 1, y: 78, stroke: 0.05em),
        cellx(x: 0, y: 78, align: name_align)[perceiver var.],
        cellx(x: 0, y: 79, align: name_align)[village_code var.],
        cellx(x: 0, y: 80, align: name_align)[N#sub[groups]],
        cellx(x: 1, y: 78)[1.2476],
        cellx(x: 1, y: 79)[0.2111],
        cellx(x: 1, y: 80)[9989, 82],
        cellx(x: 2, y: 78)[1.4022],
        cellx(x: 2, y: 79)[0.2728],
        cellx(x: 2, y: 80)[9983, 82],
        hlinex(start: 1, y: 81, stroke: 0.05em),
        cellx(x: 0, y: 81, align: name_align)[N],
        cellx(x: 0, y: 83, align: name_align)[BIC],
        cellx(x: 0, y: 82, align: name_align)[AIC],
        cellx(x: 1, y: 81)[225128],
        cellx(x: 1, y: 83)[162386.5841],
        cellx(x: 1, y: 82)[161973.6071],
        cellx(x: 2, y: 81)[434293],
        cellx(x: 2, y: 83)[418123.262],
        cellx(x: 2, y: 82)[417684.003],
        hlinex(y: 84, stroke: 0.1em),
        cellx(y: 84, colspan: 3, align: left)[Note: #ps.at(0)$p<0.1$; #ps.at(1)$p<0.05$; #ps.at(2)$p<0.005$; #ps.at(3)$p<0.001$],
    ),
    caption: flex-caption(
        [Social network response model, for the union-based tie robustness check. The TPR model is expanded to include nominations made at any wave of network data collection. Models of the individual cognizer responses on the determinants of accuracy with respondent, tie, and village characteristics.],
        [Social network response model, the union-based tie]
    ),
    kind: table,
) <model_union>
