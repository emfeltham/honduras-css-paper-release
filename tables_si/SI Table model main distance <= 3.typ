// short captions
#let in-outline = state("in-outline", false)
#show outline: it => {
    in-outline.update(true)
    it
    in-outline.update(false)
}
#let flex-caption(long, short) = locate(loc => 
    if in-outline.at(loc) { short } else { long }
)

#import"@preview/tablex:0.0.8": tablex, gridx, hlinex, vlinex, colspanx, rowspanx, cellx

// table params
#let col1width = 10em
#let coliwidth = auto
#let name_align = left + horizon
// pkey 
#let ps = (super[$+$], super[$star.op$], super[$star.op star.op$], super[$star.op star.op star.op$], )
 
#figure(
    gridx(
        columns: (col1width, coliwidth, coliwidth, ),
        rows: (0.2em, 1.5em),
        align: center + horizon,
        stroke: auto,
        hlinex(y: 0, stroke: 0.05em),
        cellx(x: 0, y: 0, colspan: 3)[],
        hlinex(y: 1, stroke: 0.05em),
        cellx(x: 1, y: 1)[(TPR | $D_(r[i j]k) lt.eq 2$)],
        cellx(x: 2, y: 1)[(FPR | $D_(r[i j]k) lt.eq 2$)],
        hlinex(start: 1, y: 2, stroke: 0.05em),
        cellx(x: 0, y: 36, align: name_align)[isindigenous_a: Mestizo],
        cellx(x: 1, y: 36)[-0.03],
        cellx(x: 1, y: 37)[(0.082)],
        cellx(x: 2, y: 36)[0.057],
        cellx(x: 2, y: 37)[(0.05)],
        cellx(x: 0, y: 20, align: name_align)[religion_c: No Religion],
        cellx(x: 1, y: 20)[-0.157],
        cellx(x: 1, y: 21)[(0.139)],
        cellx(x: 2, y: 20)[0.209#ps.at(1)],
        cellx(x: 2, y: 21)[(0.1)],
        cellx(x: 0, y: 44, align: name_align)[degree_diff_a],
        cellx(x: 1, y: 44)[0.183#ps.at(0)],
        cellx(x: 1, y: 45)[(0.1)],
        cellx(x: 2, y: 44)[0.005],
        cellx(x: 2, y: 45)[(0.059)],
        cellx(x: 0, y: 46, align: name_align)[age_mean_a],
        cellx(x: 1, y: 46)[-2.284#ps.at(3)],
        cellx(x: 1, y: 47)[(0.147)],
        cellx(x: 2, y: 46)[-0.243#ps.at(1)],
        cellx(x: 2, y: 47)[(0.088)],
        cellx(x: 0, y: 18, align: name_align)[educated: Yes],
        cellx(x: 1, y: 18)[-0.248#ps.at(3)],
        cellx(x: 1, y: 19)[(0.065)],
        cellx(x: 2, y: 18)[-0.49#ps.at(3)],
        cellx(x: 2, y: 19)[(0.057)],
        cellx(x: 0, y: 70, align: name_align)[age & age_mean_a],
        cellx(x: 1, y: 70)[3.186#ps.at(3)],
        cellx(x: 1, y: 71)[(0.385)],
        cellx(x: 2, y: 70)[0.655#ps.at(2)],
        cellx(x: 2, y: 71)[(0.226)],
        cellx(x: 0, y: 52, align: name_align)[wealth_d1_4_diff_a],
        cellx(x: 1, y: 52)[-1.48#ps.at(3)],
        cellx(x: 1, y: 53)[(0.089)],
        cellx(x: 2, y: 52)[-1.26#ps.at(3)],
        cellx(x: 2, y: 53)[(0.049)],
        cellx(x: 0, y: 22, align: name_align)[religion_c: Protestant],
        cellx(x: 1, y: 22)[-0.119#ps.at(1)],
        cellx(x: 1, y: 23)[(0.06)],
        cellx(x: 2, y: 22)[-0.108#ps.at(1)],
        cellx(x: 2, y: 23)[(0.043)],
        cellx(x: 0, y: 24, align: name_align)[wealth_d1_4],
        cellx(x: 1, y: 24)[-2.042#ps.at(3)],
        cellx(x: 1, y: 25)[(0.366)],
        cellx(x: 2, y: 24)[-3.158#ps.at(3)],
        cellx(x: 2, y: 25)[(0.249)],
        cellx(x: 0, y: 56, align: name_align)[man & man_a: Mixed],
        cellx(x: 1, y: 56)[-0.323#ps.at(3)],
        cellx(x: 1, y: 57)[(0.072)],
        cellx(x: 2, y: 56)[-0.071#ps.at(0)],
        cellx(x: 2, y: 57)[(0.037)],
        cellx(x: 0, y: 12, align: name_align)[age],
        cellx(x: 1, y: 12)[-0.24],
        cellx(x: 1, y: 13)[(0.357)],
        cellx(x: 2, y: 12)[-0.268],
        cellx(x: 2, y: 13)[(0.297)],
        cellx(x: 0, y: 54, align: name_align)[dists_p],
        cellx(x: 1, y: 54)[-0.767#ps.at(3)],
        cellx(x: 1, y: 55)[(0.04)],
        cellx(x: 2, y: 54)[-0.939#ps.at(3)],
        cellx(x: 2, y: 55)[(0.02)],
        cellx(x: 0, y: 60, align: name_align)[isindigenous_a: Mestizo & isindigenous],
        cellx(x: 1, y: 60)[-0.003],
        cellx(x: 1, y: 61)[(0.121)],
        cellx(x: 2, y: 60)[-0.093],
        cellx(x: 2, y: 61)[(0.073)],
        cellx(x: 0, y: 48, align: name_align)[age_diff_a],
        cellx(x: 1, y: 48)[1.341#ps.at(3)],
        cellx(x: 1, y: 49)[(0.08)],
        cellx(x: 2, y: 48)[0.215#ps.at(3)],
        cellx(x: 2, y: 49)[(0.039)],
        cellx(x: 0, y: 58, align: name_align)[man & man_a: Women],
        cellx(x: 1, y: 58)[0.01],
        cellx(x: 1, y: 59)[(0.063)],
        cellx(x: 2, y: 58)[0.183#ps.at(3)],
        cellx(x: 2, y: 59)[(0.042)],
        cellx(x: 0, y: 32, align: name_align)[man_a: Mixed],
        cellx(x: 1, y: 32)[0.18#ps.at(3)],
        cellx(x: 1, y: 33)[(0.046)],
        cellx(x: 2, y: 32)[-0.66#ps.at(3)],
        cellx(x: 2, y: 33)[(0.025)],
        cellx(x: 0, y: 14, align: name_align)[age ^ 2],
        cellx(x: 1, y: 14)[-0.778#ps.at(0)],
        cellx(x: 1, y: 15)[(0.417)],
        cellx(x: 2, y: 14)[1.503#ps.at(3)],
        cellx(x: 2, y: 15)[(0.362)],
        cellx(x: 0, y: 64, align: name_align)[religion_c: No Religion & religion_c_a: Same],
        cellx(x: 1, y: 64)[0.169],
        cellx(x: 1, y: 65)[(0.145)],
        cellx(x: 2, y: 64)[-0.234#ps.at(2)],
        cellx(x: 2, y: 65)[(0.078)],
        cellx(x: 0, y: 40, align: name_align)[religion_c_a: Same],
        cellx(x: 1, y: 40)[0.177#ps.at(3)],
        cellx(x: 1, y: 41)[(0.042)],
        cellx(x: 2, y: 40)[0.359#ps.at(3)],
        cellx(x: 2, y: 41)[(0.022)],
        cellx(x: 0, y: 74, align: name_align)[kin431 & relation: personal_private],
        cellx(x: 1, y: 74)[0.292#ps.at(3)],
        cellx(x: 1, y: 75)[(0.06)],
        cellx(x: 2, y: 74)[0.285#ps.at(3)],
        cellx(x: 2, y: 75)[(0.04)],
        cellx(x: 0, y: 28, align: name_align)[isindigenous],
        cellx(x: 1, y: 28)[0.001],
        cellx(x: 1, y: 29)[(0.102)],
        cellx(x: 2, y: 28)[0.152#ps.at(1)],
        cellx(x: 2, y: 29)[(0.073)],
        cellx(x: 0, y: 42, align: name_align)[degree_mean_a],
        cellx(x: 1, y: 42)[-1.061#ps.at(3)],
        cellx(x: 1, y: 43)[(0.199)],
        cellx(x: 2, y: 42)[-0.742#ps.at(3)],
        cellx(x: 2, y: 43)[(0.129)],
        cellx(x: 0, y: 2, align: name_align)[(Intercept)],
        cellx(x: 1, y: 2)[2.15#ps.at(3)],
        cellx(x: 1, y: 3)[(0.237)],
        cellx(x: 2, y: 2)[1.922#ps.at(3)],
        cellx(x: 2, y: 3)[(0.17)],
        cellx(x: 0, y: 34, align: name_align)[man_a: Women],
        cellx(x: 1, y: 34)[0.293#ps.at(3)],
        cellx(x: 1, y: 35)[(0.039)],
        cellx(x: 2, y: 34)[-0.245#ps.at(3)],
        cellx(x: 2, y: 35)[(0.026)],
        cellx(x: 0, y: 38, align: name_align)[isindigenous_a: Mixed],
        cellx(x: 1, y: 38)[-0.119],
        cellx(x: 1, y: 39)[(0.083)],
        cellx(x: 2, y: 38)[-0.036],
        cellx(x: 2, y: 39)[(0.048)],
        cellx(x: 0, y: 66, align: name_align)[religion_c: Protestant & religion_c_a: Same],
        cellx(x: 1, y: 66)[0.205#ps.at(2)],
        cellx(x: 1, y: 67)[(0.059)],
        cellx(x: 2, y: 66)[0.093#ps.at(2)],
        cellx(x: 2, y: 67)[(0.031)],
        cellx(x: 0, y: 10, align: name_align)[man],
        cellx(x: 1, y: 10)[0.146#ps.at(1)],
        cellx(x: 1, y: 11)[(0.057)],
        cellx(x: 2, y: 10)[0.102#ps.at(1)],
        cellx(x: 2, y: 11)[(0.045)],
        cellx(x: 0, y: 16, align: name_align)[educated: Some],
        cellx(x: 1, y: 16)[-0.099#ps.at(0)],
        cellx(x: 1, y: 17)[(0.052)],
        cellx(x: 2, y: 16)[-0.238#ps.at(3)],
        cellx(x: 2, y: 17)[(0.045)],
        cellx(x: 0, y: 6, align: name_align)[relation: personal_private],
        cellx(x: 1, y: 6)[-0.405#ps.at(3)],
        cellx(x: 1, y: 7)[(0.028)],
        cellx(x: 2, y: 6)[-0.221#ps.at(3)],
        cellx(x: 2, y: 7)[(0.014)],
        cellx(x: 0, y: 26, align: name_align)[coffee_cultivation],
        cellx(x: 1, y: 26)[0.222#ps.at(2)],
        cellx(x: 1, y: 27)[(0.071)],
        cellx(x: 2, y: 26)[0.152#ps.at(0)],
        cellx(x: 2, y: 27)[(0.085)],
        cellx(x: 0, y: 30, align: name_align)[educated_a: Same],
        cellx(x: 1, y: 30)[0.004],
        cellx(x: 1, y: 31)[(0.024)],
        cellx(x: 2, y: 30)[0.017],
        cellx(x: 2, y: 31)[(0.013)],
        cellx(x: 0, y: 4, align: name_align)[kin431],
        cellx(x: 1, y: 4)[2.671#ps.at(3)],
        cellx(x: 1, y: 5)[(0.049)],
        cellx(x: 2, y: 4)[3.222#ps.at(3)],
        cellx(x: 2, y: 5)[(0.031)],
        cellx(x: 0, y: 50, align: name_align)[wealth_d1_4_mean_a],
        cellx(x: 1, y: 50)[0.07],
        cellx(x: 1, y: 51)[(0.357)],
        cellx(x: 2, y: 50)[-1.391#ps.at(3)],
        cellx(x: 2, y: 51)[(0.23)],
        cellx(x: 0, y: 62, align: name_align)[isindigenous_a: Mixed & isindigenous],
        cellx(x: 1, y: 62)[0.102],
        cellx(x: 1, y: 63)[(0.114)],
        cellx(x: 2, y: 62)[0.073],
        cellx(x: 2, y: 63)[(0.063)],
        cellx(x: 0, y: 8, align: name_align)[degree],
        cellx(x: 1, y: 8)[0.344],
        cellx(x: 1, y: 9)[(0.27)],
        cellx(x: 2, y: 8)[-1.205#ps.at(3)],
        cellx(x: 2, y: 9)[(0.14)],
        cellx(x: 0, y: 72, align: name_align)[wealth_d1_4 & wealth_d1_4_mean_a],
        cellx(x: 1, y: 72)[2.553#ps.at(3)],
        cellx(x: 1, y: 73)[(0.602)],
        cellx(x: 2, y: 72)[4.063#ps.at(3)],
        cellx(x: 2, y: 73)[(0.389)],
        cellx(x: 0, y: 68, align: name_align)[degree & degree_mean_a],
        cellx(x: 1, y: 68)[0.688],
        cellx(x: 1, y: 69)[(0.855)],
        cellx(x: 2, y: 68)[2.672#ps.at(3)],
        cellx(x: 2, y: 69)[(0.529)],
        hlinex(start: 1, y: 76, stroke: 0.05em),
        cellx(x: 0, y: 76, align: name_align)[perceiver var.],
        cellx(x: 0, y: 77, align: name_align)[village_code var.],
        cellx(x: 0, y: 78, align: name_align)[N#sub[groups]],
        cellx(x: 1, y: 76)[1.303],
        cellx(x: 1, y: 77)[0.209],
        cellx(x: 1, y: 78)[9787, 82],
        cellx(x: 2, y: 76)[1.404],
        cellx(x: 2, y: 77)[0.293],
        cellx(x: 2, y: 78)[9829, 82],
        hlinex(start: 1, y: 79, stroke: 0.05em),
        cellx(x: 0, y: 79, align: name_align)[N],
        cellx(x: 0, y: 80, align: name_align)[BIC],
        cellx(x: 0, y: 81, align: name_align)[AIC],
        cellx(x: 1, y: 79)[82937],
        cellx(x: 1, y: 80)[58443.127],
        cellx(x: 1, y: 81)[58079.42],
        cellx(x: 2, y: 79)[182492],
        cellx(x: 2, y: 80)[181556.591],
        cellx(x: 2, y: 81)[181162.127],
        hlinex(y: 82, stroke: 0.1em),
        cellx(y: 82, colspan: 3, align: left)[Note: #ps.at(0)$p<0.1$; #ps.at(1)$p<0.05$; #ps.at(2)$p<0.005$; #ps.at(3)$p<0.001$],
    ),
    caption: flex-caption(
	[Network response model, with restriction on distance. Comparison of models that only include observations where the geodesic distance in the network between $k$ and the $(i,j)$ pair is 3 or less.],
	[Network response model, with restriction on distance.]
),
    kind: table,
) <main_model_limited_dist_3_regtable>
